<task id="TASK-0053">
<summary>Add performance profiling and optimization hooks.</summary>
<scope>
- Introduce lightweight profiling utilities (timing decorators/metrics) for parser/evaluator/IR builder/emitter.
- Evaluate parallelism/caching options respecting existing `--processes` flag and determinism.
- Provide performance test scaffolding/benchmarks for large Makefile scenarios.</scope>
<developer>
- Add profiling helper module (timing decorators, metrics report) and apply to key pipeline functions guarded by a flag.
- Explore parallel map/caching helpers; ensure outputs remain deterministic and thread/process safe.
- Keep profiling optional and off by default to avoid runtime cost.</developer>
<qe>
- Add benchmark-style tests or fixtures to measure/guard performance; include large-input smoke tests gated/marked to avoid CI slowdown.</qe>
<reviewer>
- Verify profiling toggles do not alter behavior and that parallel/caching paths are well-isolated with clear limits.</reviewer>
<tests>
- Commands: `ruff check . && pytest -q tests` (include perf-marked tests where practical).</tests>
</task>
