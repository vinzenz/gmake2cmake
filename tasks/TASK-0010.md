<task id="TASK-0010">
<summary>Detect and normalize unknown constructs across parser/evaluator/emitter.</summary>
<scope>
- Instrument parser, evaluator, rule-to-IR mapping, and CMakeEmitter to create UnknownConstruct entries for unsupported syntax/functions/commands/CMakes.
- Apply normalization rules (eval/call, shell(<cmd>), conditional summaries) and capture context (targets, vars, include stack).
- Attach constructs to Project.unknown_constructs without aborting migration.</scope>
<developer>
- Hook detection in MakefileParser (make_syntax), MakeEvaluator (make_function/conditional_logic), shell/custom-command mapping (shell_command), CMakeEmitter (toolchain_specific/other).
- Populate context/impact/cmake_status/suggested_action best-effort; link to affected targets; derive severity.
- Add diagnostics (UNKNOWN_CONSTRUCT) referencing construct IDs; ensure dedupe and deterministic ordering.</developer>
<qe>
- Add fixtures covering eval/call, unsupported function, unknown shell commands, unrenderable emitter cases; verify UnknownConstruct entries and diagnostics.
- Ensure migration continues for info/warn; error-level blocks only when intended; normalization fallback works.</qe>
<reviewer>
- Confirm normalization matches CR examples; context richness sufficient; no excessive token bloat; ordering deterministic.
- Validate integration with reports from TASK-0009 and no regressions to existing parsing/eval behavior.</reviewer>
<tests>
- Commands: `ruff check . && pytest -q` (unit + e2e updates as needed).
- Scenarios: eval/call normalization, shell(command) capture, conditional summary, emitter unknown mapping.</tests>
</task>
