<task id="TASK-0045">
<summary>Refactor parser control flow to reduce nesting.</summary>
<scope>
- Simplify `parse_makefile` loop by extracting line processing/conditional handling into focused helpers with a context object.
- Reduce cognitive complexity while preserving parsing behavior.</scope>
<developer>
- Introduce a ParseContext (diagnostics, unknowns, factory) and helper functions for line processing/conditionals/statements.
- Keep existing parsing outcomes/unknown construct recording identical; ensure indices advance correctly.</developer>
<qe>
- Add/adjust parser tests to cover nested conditionals and ensure refactor does not change AST/diagnostic results.</qe>
<reviewer>
- Validate readability improvement and check for off-by-one or regression risks in new helpers.</reviewer>
<tests>
- Commands: `ruff check gmake2cmake/make/parser.py && pytest -q tests/test_parser.py`.</tests>
</task>
