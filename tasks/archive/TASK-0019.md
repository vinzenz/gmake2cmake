<task id="TASK-0019">
<summary>Define and implement FileSystemAdapter interface.</summary>
<scope>
- Create `gmake2cmake.filesystem` module with abstract FileSystemAdapter interface.
- Define methods: read_file, write_file, exists, is_dir, list_dir, resolve_path, normalize_path, get_mtime.
- Implement DefaultFileSystemAdapter using pathlib/os operations.
- Create TestFileSystemAdapter for unit tests with in-memory filesystem simulation.
- Thread FileSystemAdapter through all components replacing direct filesystem access.</scope>
<developer>
- Define abstract base class with type hints and docstrings.
- Implement default adapter with proper error handling and UTF-8 encoding.
- Create test adapter supporting virtual filesystem with deterministic behavior.
- Update all components to accept fs parameter and use adapter methods.
- Ensure path normalization to posix style happens in adapter.</developer>
<qe>
- Add unit tests for both adapters covering all methods.
- Test error conditions (missing files, permission errors, encoding issues).
- Verify test adapter provides deterministic ordering and timestamps.
- Integration tests confirming pipeline works with both adapters.</qe>
<reviewer>
- Verify all direct filesystem access removed from components.
- Check adapter interface is minimal and sufficient.
- Ensure test adapter enables proper unit testing without real filesystem.
- Validate error handling and diagnostic propagation.</reviewer>
<tests>
- Commands: `pytest -q tests/test_filesystem.py tests/test_integration_with_adapter.py`.</tests>
</task>