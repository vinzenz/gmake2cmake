<task id="TASK-0048">
<summary>Add type annotations for diagnostic dict structures.</summary>
<scope>
- Define a typed diagnostic dictionary (TypedDict or dataclass) and use it in parser/diagnostics serialization.
- Annotate ParseResult diagnostics and JSON serialization payloads accordingly.</scope>
<developer>
- Create shared type (e.g., `DiagnosticDict`) in a types module; update `diagnostics.to_json` and parser diagnostics lists to use it.
- Keep serialization output identical while improving type clarity.</developer>
<qe>
- Add tests ensuring serialization still matches expected shape and types are enforced in mypy/ruff checks.</qe>
<reviewer>
- Confirm type additions do not break runtime behavior or introduce circular imports.</reviewer>
<tests>
- Commands: `ruff check . && pytest -q tests/test_parser.py tests/test_diagnostics.py`.</tests>
</task>
