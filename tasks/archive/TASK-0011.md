<task id="TASK-0011">
<summary>Finish IRBuilder classification and dependency propagation.</summary>
<scope>
- Classify targets as internal vs external/imported using build rules, tree location, and config link_overrides; apply link overrides for aliases/imported targets.
- Attach deps from prerequisites, propagate usage requirements (PUBLIC/PRIVATE/INTERFACE) and include/defines/options into IR for emitter use.
- Ensure aliases used in deps and apply visibility defaults per target type.</scope>
<developer>
- Enhance IRBuilder to derive classification (internal/external/imported) with link_overrides; create imported/interface targets as needed.
- Propagate usage requirements into Target (visibility or scoped fields) from compile/link flags and prerequisites.
- Normalize dependencies to alias names for internal targets; ensure deterministic ordering.</developer>
<qe>
- Add unit tests covering internal/external classification, override handling, alias usage in deps, and scoped propagation of includes/defines/options.
- Include negative cases for unknown deps handled gracefully.</qe>
<reviewer>
- Verify deterministic IR ordering, correct alias resolution, and visibility rules; ensure no regression to existing targets.</reviewer>
<tests>
- Commands: `ruff check . && pytest -q`.
- Scenarios: classification with link_overrides, deps using aliases, scope propagation for usage requirements.</tests>
</task>
