<task id="TASK-0006">
<summary>Expand evaluator/parser coverage: conditionals, auto-vars, custom commands, ignored paths, feature toggles.</summary>
<scope>
- Improve MakeEvaluator to handle more conditional paths, autovar substitution, custom commands, ignore paths, and feature toggle capture.
- Add parser/evaluator fixtures for complex Make constructs; enhance compile inference robustness.</scope>
<developer>
- Implement richer conditional handling (ifeq/ifneq/ifdef/ifndef with else), autovar replacements in commands, and ignored path filtering.
- Capture feature toggles into ProjectGlobals (e.g., VAR toggles) with provenance; improve compile inference for multiple sources/targets and edge flags.
- Add support for custom commands separation and diagnostics for unsupported functions.</developer>
<qe>
- Add tests in tests/parser and tests/evaluator for nested conditionals, autovars, custom commands, ignored paths, multiple compilations, unmapped functions, feature toggle capture.
- Cover scenarios TS03, TS04, TS05, TS07, TS10, TS16, TS17, TS18, TS21, TS25.</qe>
<reviewer>
- Ensure evaluator purity (no fs), deterministic ordering, and correct diagnostics codes; verify ignored paths and ProjectGlobals enrichment.</reviewer>
<tests>
- Commands: `ruff check . && pytest -q tests/parser tests/evaluator`.
- Include fixture-based cases for conditionals, pattern rules, custom commands, globals.</tests>
</task>
