<task id="TASK-0073">
<summary>Implement make introspection runner with safety guards</summary>
<scope>
- Components: new IntrospectionRunner utility (invokes GNU make), filesystem adapter, diagnostics
- Behavior: run a safe `make -pn` (or equivalent) in source-dir, capture dump without executing recipes, enforce timeouts/limits
</scope>
<developer>
- Create runnable that constructs a safe command line (e.g., `make -pn -C <src>`), ensures no build recipes execute, and captures stdout/stderr.
- Add timeout, max-output, and process-kill protections; treat timeouts and non-zero exits as diagnostics (codes: INTROSPECTION_TIMEOUT/INTROSPECTION_FAILED).
- Support opt-out for cross/host mismatches (config gating) and skip when flag off.
- Normalize environment (e.g., `MAKEFLAGS`, `MAKELEVEL`) to avoid cascading recursive makes.
- Integrate with CLI pipeline: run before parse/eval when enabled and pass captured dump to downstream parser.
</developer>
<qe>
- Add unit tests using a fake process runner to assert command construction, timeout handling, and diagnostics on failure.
- Include integration fixture with a tiny Makefile ensuring introspection completes and emits a dump.
- Validate skip path when flag is off or `make` missing.
</qe>
<reviewer>
- Check safety (no recipe execution) and resource limits are enforced.
- Ensure deterministic logging and diagnostic codes; verify failures do not crash pipeline.
- Confirm runner is plumbed behind the new flag only.
</reviewer>
<tests>
- pytest -k introspection_runner
- Integration: pytest tests/e2e (add fixture)
- Manual: gmake2cmake --use-make-introspection --dry-run on a small sample
</tests>
</task>
