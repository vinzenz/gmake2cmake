<task id="TASK-0001">
<summary>Implement DiagnosticsReporter and ConfigManager plus CLIController skeleton (argument parsing + pipeline wiring stubs) with packaging flag support.</summary>
<scope>
- Components: DiagnosticsReporter, ConfigManager, CLIController (parse_args, run stub with mocked downstream), FileSystemAdapter test double.
- No Make parsing yet; pipeline can short-circuit with placeholder success.</scope>
<developer>
- Implement data classes and functions per specs; keep CLI run using dependency injection for fs and now.
- Support CLI flag `--with-packaging` and propagate into ConfigModel.packaging_enabled and emitter options placeholder.
- Add Unit tests: diagnostics dedup/JSON/console, config loading (missing file, strict mode, global_config_files defaults, link_overrides parsing), CLI arg parsing defaults/overrides/dry-run/with-packaging behavior.
- Add lint config (ruff) and minimal pyproject/project layout under gmake2cmake package.
- Ensure run() uses diagnostics exit_code; downstream stubs returning empty data acceptable for now.</developer>
<qe>
- Author pytest cases for above; include fixture for fake fs; verify no filesystem writes in dry-run.
- Validate CLI help text includes expected flags (including --with-packaging); simulate error exit when entry missing (mock discoverer).</qe>
<reviewer>
- Check adherence to specs (function signatures, immutability, no sys.exit).
- Confirm tests cover WARN/ERROR paths; lint config enforced; packaging flag plumbed to config.
- Verify diagnostics rendering deterministic ordering.</reviewer>
<tests>
- Commands: `pip install -e . && ruff check . && pytest -q`.
- Cover scenarios TS01 (CLI defaults), TS06 (missing include via diagnostics placeholder), TS13 (dry-run path), TS14 (report serialization base), TS24 packaging flag plumb.</tests>
</task>
