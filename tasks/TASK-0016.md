<task id="TASK-0016">
<summary>Preserve custom commands through IR and emitter.</summary>
<scope>
- Map `BuildFacts.custom_commands` into IR (custom command entries on targets or dedicated custom targets) instead of discarding them.
- Render custom commands in CMakeEmitter via `add_custom_command`/`add_custom_target`, carrying outputs/inputs/working_dir where available.
- Ensure unknown constructs tied to custom commands still surface and ignore paths are honored.</scope>
<developer>
- Introduce IR models for custom commands matching evaluator output; thread them through `build_targets`/`Project` and into emitter rendering with deterministic naming for unattached commands.
- Keep dry-run/write paths consistent and avoid regressions in packaging or alias/link handling.</developer>
<qe>
- Add coverage in `tests/ir/test_ir_builder.py` and `tests/emitter/test_emitter.py` asserting custom commands survive and emit expected CMake blocks (including dry-run).</qe>
<reviewer>
- Check mapping respects `ConfigModel.ignore_paths` and existing compile rule separation; ensure diagnostics/unknown construct flows remain intact.</reviewer>
<tests>
- Commands: `pytest -q tests/ir/test_ir_builder.py tests/emitter/test_emitter.py`.</tests>
</task>
