<task id="TASK-0065">
<summary>Handle template-only trees that surface DISCOVERY_ENTRY_MISSING</summary>
<scope>
- Components: discovery.resolve_entry, CLI diagnostics, config loader messaging
- Repos: binutils-gdb, OpenSSL (only Makefile.in/Makefile.tpl present without generated Makefile)
</scope>
<developer>
- Extend entry resolution to detect template/autotools inputs (Makefile.in/Makefile.tpl/Makefile.def) and surface actionable guidance rather than a generic missing Makefile error.
- Add a flag or config hook to point at template entry files when a generated Makefile is absent, with clear handoff to parser for read-only dry-run mode.
- Emit a diagnostic that suggests the bootstrap step (./configure/Configure) and records which template candidates were found.
- Keep backward compatibility with explicit --entry-makefile when provided; avoid silently preferring templates if a real Makefile exists.
- Document the entry selection rules and expectations in README/CLI help.
</developer>
<qe>
- Add fixture for template-only projects (Makefile.in + Makefile.tpl, no Makefile) asserting DISCOVERY_ENTRY_MISSING remains but includes remediation guidance.
- Verify normal projects with Makefile still resolve cleanly and do not regress entry selection order.
- E2E dry-run gmake2cmake on binutils-gdb and OpenSSL clones to confirm updated diagnostic surfaces.
</qe>
<reviewer>
- Check template detection ordering and ensure no breaking changes to existing entry resolution.
- Confirm diagnostics are actionable, deduplicated, and provide clear remediation steps.
- Ensure documentation updates align with behavior and that CLI flag interactions are explicit.
</reviewer>
<tests>
- pytest tests/discovery/test_real_world_regressions.py::test_template_only_project_triggers_entry_missing
- pytest -k entry_missing
- Dry-run: gmake2cmake --source-dir binutils-gdb --dry-run --report
</tests>
</task>
